(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/newProduct/main"],{"05aa":function(t,n,e){},"1c3e":function(t,n,e){"use strict";e.r(n);var o=e("bb39"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},"5b2f":function(t,n,e){"use strict";var o,i=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.showShareOrSave=!0},t.e1=function(n){t.showShareOrSave=!1})},a=[];e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}))},8467:function(t,n,e){"use strict";e.r(n);var o=e("5b2f"),i=e("1c3e");for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("9150");var r,c=e("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=s.exports},9150:function(t,n,e){"use strict";var o=e("05aa"),i=e.n(o);i.a},bb39:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=l(e("a34a")),i=l(e("b775")),a=l(e("ed08")),r=(e("5f87"),e("2f62")),c=l(e("0f88")),s=e("ee73"),u=e("cf45");function l(t){return t&&t.__esModule?t:{default:t}}function d(t){return g(t)||p(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function g(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function m(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(e,!0).forEach((function(n){y(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function y(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function w(t,n,e,o,i,a,r){try{var c=t[a](r),s=c.value}catch(u){return void e(u)}c.done?n(s):Promise.resolve(s).then(o,i)}function v(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){w(a,o,i,r,c,"next",t)}function c(t){w(a,o,i,r,c,"throw",t)}r(void 0)}))}}var S=function(){e.e("components/getPhoneNumberGoods").then(function(){return resolve(e("0c12"))}.bind(null,e)).catch(e.oe)},b=function(){e.e("components/AuthenticationTag").then(function(){return resolve(e("3c81"))}.bind(null,e)).catch(e.oe)},_=function(){e.e("components/shareOrSave").then(function(){return resolve(e("5998"))}.bind(null,e)).catch(e.oe)},P=function(){e.e("components/noData").then(function(){return resolve(e("6a2b"))}.bind(null,e)).catch(e.oe)},C=function(){e.e("components/swiper").then(function(){return resolve(e("91b0"))}.bind(null,e)).catch(e.oe)},I=function(){e.e("components/FloatButtons").then(function(){return resolve(e("590c"))}.bind(null,e)).catch(e.oe)},x=function(){Promise.all([e.e("common/vendor"),e.e("components/NavBarByUser")]).then(function(){return resolve(e("f655"))}.bind(null,e)).catch(e.oe)},O=function(){Promise.all([e.e("common/vendor"),e.e("components/LoginIntercept")]).then(function(){return resolve(e("f887"))}.bind(null,e)).catch(e.oe)},L={name:"",components:{NoData:P,getPhoneNumberGoods:S,SelfSwiper:C,AuthenticationTag:b,FloatButtons:I,NavBarByUser:x,LoginIntercept:O,ShareOrSave:_},data:function(){return{showShareOrSave:!1,canClickStar:!0,menu:[],menu_id:"-10",prod_lists:[],nodata:!1,COMPANYID:0,company_msg:{admin_logo:"",company_logo:"",company_name:""},currentPage:1,isCollect:!1,collectionId:0,page:1,isLoading:!1,right_float_show:!1,nav_top:!1,banners:["https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-01.jpg","https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-02.jpg","https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-03.jpg","https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-04.jpg","https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-05.jpg","https://yyker-one-stand.oss-cn-beijing.aliyuncs.com/yimai_photos/user/default-banner-06.jpg"],isShow:!0,avatarUrl:"",isLogin:c.default.returnIsLogin()||!1,isShowTalk:!0,isShowLoginGuide:!0,targetAvatarUrl:"",scrollContentHeight:0,mainHeight:0}},onShow:function(){if(c.default.returnIsLogin()){var t=this.COMPANYID;this.COMPANYID=wx.getStorageSync("COMPANYID")||0,t==this.COMPANYID&&this.COMPANYID||(this.prod_lists=[],this.page=1,this.getcompany(),this.menu_tap("-10"),this.getAd()),this.isLogin=c.default.returnIsLogin()||!1,this.avatarUrl=wx.getStorageSync("avatarUrl")||""}else wx.switchTab({url:"/pages/index/main"})},mounted:function(){var t=v(o.default.mark((function t(){var n,e;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.systemIfo();case 2:n=t.sent,e=getApp().globalData.navHeight,this.mainHeight=n.windowHeight,this.scrollContentHeight=n.windowHeight-e;case 6:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),computed:m({},(0,r.mapState)({currentCompany:function(t){return t.currentCompany}})),watch:{currentCompany:{deep:!0,immediate:!0,handler:function(t){t&&(t.userId===wx.getStorageSync("userId")?this.isShowTalk=!1:(this.isShowTalk=!0,this.targetAvatarUrl=t.logo))}}},onShareAppMessage:function(t){var n=wx.getStorageSync("COMPANYID")||0,e=wx.getStorageSync("CARDID")||0;this.addGoodsForwardRecord(e);var o=e+""+(new Date).getTime();return(0,s.addShareRecord)(n,2,n,o).then((function(t){}),(function(t){})),{title:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName,path:"/pages/Product/main?cardId="+e+"&companyId="+n+"&goType=1&shareId="+o,success:function(t){wx.showShareMenu({withShareTicket:!0})},fail:function(t){console.log("失败分享名片--- ",t)}}},onPageScroll:function(t){},onPullDownRefresh:function(){var t=v(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:wx.showNavigationBarLoading(),this.page=1,this.prod_lists=[],this.nodata=!1,this.isLoading=!1,this.getcompany(),this.getAd(),this.menu_tap(this.menu_id||"-10"),wx.showLoading(),wx.stopPullDownRefresh(),setTimeout((function(){wx.hideLoading(),wx.hideNavigationBarLoading()}),300);case 11:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),methods:{onSearch:function(t){wx.navigateTo({url:"/pages/searchGoods/main?companyId=".concat(this.COMPANYID,"&search=").concat(t.detail)})},getPhoneNumber:function(){var t=v(o.default.mark((function t(n){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.target.encryptedData){t.next=2;break}return t.abrupt("return");case 2:return this.showShareOrSave=!0,t.next=5,(0,u.saveServerPhone)({encryptedData:n.target.encryptedData,iv:n.target.iv});case 5:t.sent;case 6:case"end":return t.stop()}}),t,this)})));function n(n){return t.apply(this,arguments)}return n}(),GeneratePoster:function(){wx.navigateTo({url:"/pages/showBill/main"}),this.showShareOrSave=!1},goTo:function(){wx.navigateTo({url:"/pages/appointment/main"})},scrolltoupper:function(t){this.page=1,this.prod_lists=[],this.nodata=!1,this.isLoading=!1,this.getcompany(),this.getAd(),this.menu_tap(this.menu_id||"-10"),wx.showLoading()},scrolltolower:function(t){var n=this;n.getProds()},cancelLoginGuide:function(){this.isShowLoginGuide=!1},loginGuide:function(){this.isShowLoginGuide=!0},loginInterceptSuccess:function(){console.log("登录拦截回调"),this.avatarUrl=wx.getStorageSync("avatarUrl")||""},talk:function(){wx.navigateTo({url:"../IM/main?userId="+this.currentCompany.userId+"&logo="+this.currentCompany.logo+"&type=2&cardId="+this.currentCompany.cardId+"&name="+this.currentCompany.name+"&wxCode="+(this.currentCompany.personalWx||"")+"&phone="+this.currentCompany.phone})},loginSuccess:function(t){this.isLogin=!0,this.hasCard=wx.getStorageSync("hasCard")||!1,this.avatarUrl=wx.getStorageSync("avatarUrl")||""},loginFailed:function(){this.isShowLoginGuide=!0},preview:function(t){this.previewImages(this.banners,this.banners[t])},clickRightRowEvent:function(){this.isShow=!this.isShow,console.log("收起浮窗")},getAd:function(){var t=this;this.getPlateAds(1).then((function(n){t.banners=n?n.map((function(t){return t.photo})):[]})).catch((function(){t.banners=[]}))},getcompany:function(){var t=this,n=this;i.default.POST({companyId:n.COMPANYID},"","/goods/getCompanyInfo/V2").then((function(t,e){t&&(n.company_msg={admin_logo:t.userLogo||"",company_logo:t.companyLogo||"",company_name:t.companyName||""},n.company_msg={company_logo:t.companyLogo,company_name:t.companyName},n.isCollect=1==t.isCollection,t.goodstypeModelList?n.menu=t.goodstypeModelList:(n.menu_id="",n.menu="",n.prod_lists=[]))})).catch((function(n){t.company_msg={}}))},getMeuns:function(){var t=this;wx.showLoading(),i.default.POST({companyId:t.COMPANYID},"","/goods/getGoodsType").then((function(n,e){n&&(t.company_msg={company_logo:n[0].companyLogo,company_name:n[0].companyName},t.menu_id=n[0].goodstypeId,t.menu=n,t.isCollect=1==n[0].isCollection,t.menu_tap(t.menu_id)),wx.hideLoading()})).catch((function(n){wx.hideLoading(),t.menu=[]}))},checkCollect:function(){var t=this;i.default.checkCollect({itemType:3,itemId:this.COMPANYID}).then((function(n){t.isCollect=n.status,t.collectionId=n.collectionId||0})).catch((function(t){}))},getProds:function(){var t=this;t.isLoading?wx.hideLoading():(t.isLoading=!0,i.default.POST({goodstypeId:t.menu_id,pageNum:t.page,companyId:wx.getStorageSync("COMPANYID"),cardId:wx.getStorageSync("CARDID")},"","/goods/getGoodsList/V2").then((function(n){wx.hideLoading(),n&&(n.forEach((function(t,n){t.goodPhoto?t.prodLogo=t.goodPhoto.split(",")[0]:t.prodLogo="",t.price?(t.price/=100,t.price=t.price.toFixed(2)):t.price="",t.isKill&&(t.killPrice=t.killPrice/100,t.killPrice=t.killPrice.toFixed(2),t.originPrice=t.price)})),t.prod_lists=[].concat(d(t.prod_lists),d(n)),t.page++,setTimeout((function(){t.isLoading=!1}),500))})).catch((function(n){console.log(n),t.prod_lists=[],wx.hideLoading(),204==n.code&&(t.nodata=!0),setTimeout((function(){t.isLoading=!1}),500)})))},menu_tap:function(t){this.menu_id=t||"",this.page=1,this.nodata=!1,this.isLoading=!1,this.prod_lists=[],wx.showLoading(),this.getProds()},toProdDetail:a.default.throttle((function(t){var n=this.prod_lists.filter((function(n){return n.goodsId===t}))[0];wx.setStorageSync("prod",n),wx.navigateTo({url:"../prodDetail/main?goodId="+t})}),1e3),collect:function(){var t=this;if(c.default.returnIsLogin()){if(this.canClickStar){this.canClickStar=!1;var n="",e={};this.isCollect?(n="/personal/delCollection",e={itemType:3,itemId:this.COMPANYID}):(n="/personal/addCollection",e={itemType:3,itemId:this.COMPANYID}),i.default.changeCollect(e,n).then((function(n){console.log(n),n&&(t.isCollect=!t.isCollect,wx.showToast({title:t.isCollect?"收藏成功！":"取消收藏！",icon:"none",duration:2e3})),setTimeout((function(){t.canClickStar=!0}),200)})).catch((function(n){setTimeout((function(){t.canClickStar=!0}),200)}))}}else this.loginGuide()}}};n.default=L},f544:function(t,n,e){"use strict";(function(t){e("6cdc"),e("921b");o(e("66fd"));var n=o(e("8467"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["f544","common/runtime","common/vendor"]]]);