(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editVideoExhibition/main"],{"2afc":function(e,o,t){},3299:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=n(t("b775"));function n(e){return e&&e.__esModule?e:{default:e}}var a=function(){t.e("components/selectorOne").then(function(){return resolve(t("af06"))}.bind(null,t)).catch(t.oe)},d=function(){t.e("components/dialogBox").then(function(){return resolve(t("be00"))}.bind(null,t)).catch(t.oe)},c=function(){t.e("components/bottom_button_small").then(function(){return resolve(t("881f"))}.bind(null,t)).catch(t.oe)},u={components:{DialogBox:d,SelectorOne:a,BottomButtonSmall:c},data:function(){return{playVideo:!1,type:"",dialog_show:!1,dialog_title:"标题",dialog_ph:"请输入视频链接",dialog_value:"",chooseTypeShow:!1,uploadVideoType:0,uploadVideoTypes:[{name:"添加链接",id:1},{name:"本地视频",id:2}],videoItem:{describes:"",url:"",cover:""}}},onLoad:function(){var e=this.$root.$mp.query.type;if(wx.setNavigationBarTitle({title:"edit"===e?"编辑视频":"新增视频"}),"edit"===e){var o=wx.getStorageSync("editVideoExhibition");this.videoItem.describes=o.videoTitle,this.videoItem.url=o.videoUrl,this.videoItem.cover=o.videoCover,this.videoItem.videoId=o.videoId}},onUnload:function(){wx.removeStorage({key:"editVideoExhibition"})},methods:{setCover:function(){var e=this;wx.showLoading(),wx.chooseImage({count:1,sourceType:["album","camera"],success:function(o){i.default.UploadImage(o.tempFilePaths[0]).then((function(o){if(wx.hideLoading(),o=JSON.parse(o),200==o.code){var t=i.default.imgBackUrl+o.data;e.videoItem.cover=t}})).catch((function(e){wx.hideLoading(),wx.showToast({title:"服务器繁忙",duration:2e3,icon:"none"})}))},fail:function(e){wx.hideLoading()}})},choose:function(e,o){var t=this;this.chooseTypeShow=!1,1==e&&(this.dialog_show=!0),2==e&&wx.chooseVideo({sourceType:["camera","album"],compressed:!1,camera:"back",success:function(e){wx.showLoading({title:"上传中…",mask:!0}),i.default.UploadImage(e.tempFilePath).then((function(e){if(wx.hideLoading(),e=JSON.parse(e),200==e.code){var o=i.default.imgBackUrl+e.data;t.videoItem.url=o}})).catch((function(e){console.log(e),wx.hideLoading(),wx.showToast({title:"服务器繁忙",duration:2e3,icon:"none"})}))},fail:function(e){wx.hideLoading(),wx.showToast({title:"保存失败",duration:2e3,icon:"none"})}})},dialog_tap:function(e,o){"save"==e&&(this.videoItem.url=o),this.dialog_show=!1},btn_tap:function(){this.videoItem.describes.trim()?this.videoItem.url.trim()?(wx.showLoading(),"edit"==this.$root.$mp.query.type?i.default.POST({videoUrl:this.videoItem.url,videoCover:this.videoItem.cover,videoTitle:this.videoItem.describes,videoId:this.videoItem.videoId},"","/businessCardVideo/uodVideo").then((function(e){wx.hideLoading(),wx.showToast({title:"保存编辑视频成功",duration:2e3,icon:"none"});var o=getCurrentPages();o[o.length-1].onLoad(),wx.navigateBack()})).catch((function(e){wx.hideLoading(),wx.showToast({title:"保存编辑视频失败",duration:2e3,icon:"none"})})):i.default.POST({videoUrl:this.videoItem.url,videoCover:this.videoItem.cover,videoTitle:this.videoItem.describes},"","/businessCardVideo/addVideo").then((function(e){wx.hideLoading(),wx.showToast({title:"添加视频成功！",duration:1e3,icon:"none"}),wx.navigateBack()})).catch((function(e){wx.hideLoading(),wx.showToast({title:"添加视频失败！",duration:2e3,icon:"none"})}))):wx.showToast({title:"请添加视频",duration:2e3,icon:"none"}):wx.showToast({title:"请输入标题",duration:2e3,icon:"none"})}}};o.default=u},"3b27":function(e,o,t){"use strict";(function(e){t("6cdc"),t("921b");i(t("66fd"));var o=i(t("bbda"));function i(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])},"834f":function(e,o,t){"use strict";var i=t("2afc"),n=t.n(i);n.a},aa7e:function(e,o,t){"use strict";t.r(o);var i=t("3299"),n=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(o,e,(function(){return i[e]}))}(a);o["default"]=n.a},bbda:function(e,o,t){"use strict";t.r(o);var i=t("f9db"),n=t("aa7e");for(var a in n)"default"!==a&&function(e){t.d(o,e,(function(){return n[e]}))}(a);t("834f");var d,c=t("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],d);o["default"]=u.exports},f9db:function(e,o,t){"use strict";var i,n=function(){var e=this,o=e.$createElement;e._self._c;e._isMounted||(e.e0=function(o){e.chooseTypeShow=!0},e.e1=function(o){e.chooseTypeShow=!0},e.e2=function(o){e.playVideo=!0},e.e3=function(o){e.chooseTypeShow=!1})},a=[];t.d(o,"b",(function(){return n})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return i}))}},[["3b27","common/runtime","common/vendor"]]]);