(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/companyAddr/main"],{"3d93":function(t,n,e){"use strict";e.r(n);var o=e("b9f5"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},"722d":function(t,n,e){"use strict";e.r(n);var o=e("a37a"),a=e("3d93");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);var c,s=e("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);n["default"]=r.exports},"8d87":function(t,n,e){"use strict";(function(t){e("6cdc"),e("921b");o(e("66fd"));var n=o(e("722d"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},a37a:function(t,n,e){"use strict";var o,a=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}))},b9f5:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("a34a")),a=i(e("fa99"));function i(t){return t&&t.__esModule?t:{default:t}}function c(t,n,e,o,a,i,c){try{var s=t[i](c),r=s.value}catch(u){return void e(u)}s.done?n(r):Promise.resolve(r).then(o,a)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var i=t.apply(n,e);function s(t){c(i,o,a,s,r,"next",t)}function r(t){c(i,o,a,s,r,"throw",t)}s(void 0)}))}}var r={name:"",components:{},data:function(){return{locat:{city:"成都",addr:"",lat:"",lng:""},key:"",isinput:!1,myAmapFun:"",Mc:"",adcode:"",search_lists:[]}},mounted:function(){wx.setNavigationBarTitle({title:"选择地址"}),this.Mc=wx.createMapContext("map"),this.myAmapFun=new a.default.AMapWX({key:"e11026819b6d300fda6a2c680fbd2fef"}),this.getlocation()},onShow:function(){var t=wx.getStorageSync("company_city");t&&(this.locat.city=t),this.search_lists=[]},onHide:function(){console.log("close---")},watch:{key:function(t,n){this.inputting()}},methods:{page_turn:function(t){wx.navigateTo({url:"../"+t+"/main"})},chooseCity:function(t,n){wx.navigateTo({url:"../"+t+"/main?type="+n})},getlocation:function(){wx.showLoading({title:"定位中...",mask:!0});var t=this;wx.getLocation({type:"wgs84",success:function(n){t.locat.lat=n.latitude,t.locat.lng=n.longitude,t.getLocal(),wx.hideLoading()},fail:function(t){console.log(t,"===>"),wx.hideLoading({success:function(){wx.showToast({title:"定位失败",icon:"none",duration:2e3})}})},complete:function(){wx.hideLoading()}})},getLocal:function(t,n){var e=this;e.myAmapFun.getRegeo({location:e.locat.lng+","+e.locat.lat,success:function(t){console.log(t[0].regeocodeData.addressComponent);var n=t[0].regeocodeData.addressComponent,o=n.neighborhood,a=n.streetNumber;e.locat.city=n.city,e.adcode=n.adcode,o&&o.name.length>0?e.locat.addr=o.name:e.locat.addr=a.street+a.number,wx.setStorageSync("company_address",{street:n.province+n.city+n.district,build:e.locat.addr})},fail:function(t){e.locat.city="失败",e.locat.addr="重新定位",console.log(t)}})},inputting:function(){var t=s(o.default.mark((function t(){var n,e;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.next=3,n.getSearchAddr();case 3:e=t.sent,n.search_lists=[],console.log(e),e.forEach((function(t,e){t.location&&n.myAmapFun.getDrivingRoute({origin:n.locat.lng+","+n.locat.lat,destination:t.location,success:function(e){if(e.paths[0]&&e.paths[0].distance){var o=e.paths[0]&&e.paths[0].distance;o*=.001,o=o.toFixed(2),n.search_lists.push({build:t.name,street:t.district,distance:o+"km"}),o=null}},fail:function(t){console.log(t)}})}));case 7:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),getSearchAddr:function(){var t=this;return new Promise((function(n,e){t.myAmapFun.getInputtips({keywords:t.key,city:t.locat.city,success:function(t){t&&t.tips&&n(t.tips)},fail:function(t){n(t)}})}))},choose_addr:function(t){var n=this;console.log(this.search_lists[t]);wx.showLoading(),setTimeout((function(){wx.navigateBack(),wx.setStorageSync("company_address",n.search_lists[t]),wx.hideLoading()}),500)}}};n.default=r}},[["8d87","common/runtime","common/vendor"]]]);