(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/list/pay"],{"330e":function(t,e,i){},"4a20":function(t,e,i){"use strict";i.r(e);var n=i("cf0e"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},b733:function(t,e,i){"use strict";var n=i("330e"),a=i.n(n);a.a},c517:function(t,e,i){"use strict";(function(t){i("6cdc"),i("921b");n(i("66fd"));var e=n(i("ca31"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},ca31:function(t,e,i){"use strict";i.r(e);var n=i("de4c"),a=i("4a20");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("b733");var o,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=c.exports},cf0e:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("9ab4"),a=n.__importDefault(i("66fd")),r=n.__importDefault(i("2fe1")),o=i("7e00");i("7e6c");var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemList=[],e.title="",e.companyName=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName,e.killPrice=0,e.isShow=!1,e.id=0,e.orderId=0,e.countDown="30:00",e}return n.__extends(e,t),e.prototype.onLoad=function(t){this.getData(t.id)},e.prototype.setValue=function(t){this.itemList[t.target.dataset.index].temValue=t.mp.detail},e.prototype.getData=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(i){switch(i.label){case 0:return[4,o.selectSignById(t)];case 1:return e=i.sent(),this.id=t,e.activityTheme&&(this.title=e.activityTheme),e.itemsList&&(this.itemList=e.itemsList),e.killPrice&&(this.killPrice=e.killPrice),[2]}}))}))},e.prototype.onClose=function(){this.isShow=!1},e.prototype.pay=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return wx.showLoading({title:"Loading...",mask:!0}),[4,o.payMoney(this.orderId)];case 1:return t=e.sent(),wx.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonce_str,package:"prepay_id="+t.prepay_id,signType:"MD5",paySign:t.paySign,success:function(){wx.showToast({title:"支付成功",icon:"success"}),wx.redirectTo({url:"/pages/activity/order/info?id="+this.orderId})},fail:function(t){"requestPayment:fail cancel"===t.errMsg?wx.showToast({title:"支付已取消",icon:"none"}):wx.showToast({title:"支付失败",icon:"none"})}}),wx.hideLoading(),[2]}}))}))},e.prototype.submit=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i;return n.__generator(this,(function(n){switch(n.label){case 0:return t=[],e={flag:!1,message:""},this.itemList.map((function(i){1==i.isTrue&&(i.temValue?t.push({itemsId:i.itemsId,content:i.temValue}):(e.flag=!0,e.message=i.signName))})),e.flag?(wx.showToast({title:e.message+"必须填写",icon:"none",duration:2e3}),[2]):(wx.showLoading({title:"Loading...",mask:!0}),i=this,[4,o.saveSignOrder(this.id,t)]);case 1:return i.orderId=n.sent(),this.killPrice>0?this.isShow=!0:wx.redirectTo({url:"/pages/activity/order/info?id="+this.orderId}),wx.hideLoading(),[2]}}))}))},e=n.__decorate([r.default],e),e}(a.default);e.default=s},de4c:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.setValue(e)})},r=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))}},[["c517","common/runtime","common/vendor"]]]);