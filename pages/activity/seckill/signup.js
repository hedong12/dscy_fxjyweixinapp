(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/seckill/signup"],{"0ecb":function(t,e,a){},"0ffd":function(t,e,a){"use strict";a.r(e);var n=a("66e0"),i=a("bf78");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("ca6b");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=c.exports},"66e0":function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.getDate(t.data.startTime)),n=t.getDate(t.data.endTime),i=t.getPrice(t.data.killPrice),r=t.getPrice(t.data.signMoney);t.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:i,m3:r}})},r=[];a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}))},bf78:function(t,e,a){"use strict";a.r(e);var n=a("f308"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},ca6b:function(t,e,a){"use strict";var n=a("0ecb"),i=a.n(n);i.a},dd7a:function(t,e,a){"use strict";(function(t){a("6cdc"),a("921b");n(a("66fd"));var e=n(a("0ffd"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},f308:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("9ab4"),i=n.__importDefault(a("66fd")),r=n.__importDefault(a("2fe1")),o=a("7e00");a("7e6c");var s=a("ee73"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data={killPrice:0,signMoney:0},e.surplusTime=0,e.briefIntroduction=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).briefIntroduction||"",e.audioArr={bl:!1,time:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).soundTime,id:1,src:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).soundRecording},e.myaudio=wx.createInnerAudioContext(),e.videoList=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).videoList||[],e.photo=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).photo?JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).photo.split(","):"",e.companyName=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName||"",e.phone=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).phone||"",e.address=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).address||"",e}return n.__extends(e,t),e.prototype.onLoad=function(t){console.log("123456"),this.getData(t.id),this.myaudio.obeyMuteSwitch=!1,console.log("Hello WOrld")},e.prototype.onShareAppMessage=function(){var t=wx.getStorageSync("COMPANYID")||0,e=wx.getStorageSync("CARDID")||0,a=e+""+(new Date).getTime();return s.addShareRecord(t,3,"",a),{title:this.companyName+"邀请您参加"+this.data.activityTheme,path:"/pages/activity/list/signup?cardId="+e+"&companyId="+t+"&goType=1&shareId="+a+"&id="+this.data.signId}},e.prototype.pay=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e;return n.__generator(this,(function(a){switch(a.label){case 0:return this.data.signId?(wx.showLoading({title:"Loading...",mask:!0}),[4,o.saveSignOrder(this.data.signId)]):[2];case 1:return t=a.sent(),this.data.killPrice?[4,o.payMoney(t)]:(wx.redirectTo({url:"/pages/activity/order/info?id="+t}),[2]);case 2:return e=a.sent(),wx.hideLoading(),wx.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonce_str,package:"prepay_id="+e.prepay_id,signType:"MD5",paySign:e.paySign,success:function(){wx.showToast({title:"支付成功",icon:"success"}),wx.redirectTo({url:"/pages/activity/order/info?id="+t})},fail:function(t){"requestPayment:fail cancel"===t.errMsg?wx.showToast({title:"支付已取消",icon:"none"}):wx.showToast({title:"支付失败",icon:"none"})}}),[2]}}))}))},e.prototype.getData=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,a;return n.__generator(this,(function(n){switch(n.label){case 0:return e=this,[4,o.selectSignById(t)];case 1:return e.data=n.sent(),a=this.data.endTime,a=a.replace(".000+0000",""),a=a.replace(/-/g,"/"),a=a.replace(/T/g," "),this.surplusTime=+new Date(a)+288e5-+new Date,[2]}}))}))},e.prototype.getDate=function(t){if(t){t=t.replace(".000+0000",""),t=t.replace(/-/g,"/"),t=t.replace(/T/g," ");var e=new Date(new Date(t).getTime()+288e5);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()}},e.prototype.audioPlay=function(t){var e=this,a=(t.currentTarget.dataset.id,t.currentTarget.dataset.key,this.audioArr),n=a.src;n&&(this.myaudio.src=n,this.myaudio.autoplay=!0,this.myaudio.startTime=0,this.$set(this.audioArr,"bl",!0),this.myaudio.onPlay((function(){e.audioArr=a})),this.myaudio.onEnded((function(){a.bl=!1,e.myaudio.stop(),e.myaudio.destroy(),e.myaudio=wx.createInnerAudioContext(),e.myaudio.obeyMuteSwitch=!1,e.$set(e.audioArr,"bl",!1)})))},e.prototype.getPrice=function(t){return(t/100+1e-6).toFixed(2)},e.prototype.audioStop=function(t){t.currentTarget.dataset.key;var e=this.audioArr;e.bl=!1,this.myaudio.stop(),this.myaudio.destroy(),this.myaudio=wx.createInnerAudioContext(),this.myaudio.obeyMuteSwitch=!1},e.prototype.phoneCall=function(){wx.makePhoneCall({phoneNumber:this.phone})},e=n.__decorate([r.default],e),e}(i.default);e.default=c}},[["dd7a","common/runtime","common/vendor"]]]);