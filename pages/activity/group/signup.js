(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/group/signup"],{"32b9":function(e,t,a){},"3a24":function(e,t,a){"use strict";a.r(t);var n=a("b82c"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},9347:function(e,t,a){"use strict";var n=a("32b9"),i=a.n(n);i.a},a4c2:function(e,t,a){"use strict";var n,i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.getDate(e.data.startTime)),n=e.getDate(e.data.endTime),i=e.getPrice(e.data.killPrice),r=e.getPrice(e.data.signMoney),o=e.getDate(e.data.assembleModel&&e.data.assembleModel.endTime?e.data.assembleModel.endTime:0);e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:i,m3:r,m4:o}})},r=[];a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}))},b82c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("9ab4"),i=n.__importDefault(a("66fd")),r=n.__importDefault(a("2fe1")),o=a("7e00");a("7e6c");var s=a("ee73"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data={killPrice:0,signMoney:0},t.surplusTime=0,t.briefIntroduction=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).briefIntroduction||"",t.audioArr={bl:!1,time:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).soundTime,id:1,src:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).soundRecording},t.myaudio=wx.createInnerAudioContext(),t.videoList=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).videoList||[],t.photo=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).photo?JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).photo.split(","):"",t.companyName=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName||"",t.phone=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).phone||"",t.address=JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).address||"",t}return n.__extends(t,e),t.prototype.onLoad=function(e){this.getData(e.id),this.myaudio.obeyMuteSwitch=!1},t.prototype.onShareAppMessage=function(){var e=wx.getStorageSync("COMPANYID")||0,t=wx.getStorageSync("CARDID")||0,a=t+""+(new Date).getTime();return s.addShareRecord(e,3,"",a),{title:this.companyName+"邀请您参加"+this.data.activityTheme,path:"/pages/activity/list/signup?cardId="+t+"&companyId="+e+"&goType=1&shareId="+a+"&id="+this.data.signId}},t.prototype.pay=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,a,i,r;return n.__generator(this,(function(n){switch(n.label){case 0:return t=this.data.signId||0,wx.showLoading({title:"Loading...",mask:!0}),[4,o.openOrJoinAssemble(t,e,1)];case 1:return a=n.sent(),[4,o.saveSignOrder(t,void 0,a)];case 2:return i=n.sent(),this.data.killPrice?[4,o.payMoney(i)]:(wx.redirectTo({url:"/pages/activity/order/info?id="+i}),[2]);case 3:return r=n.sent(),wx.hideLoading(),wx.requestPayment({timeStamp:r.timeStamp,nonceStr:r.nonce_str,package:"prepay_id="+r.prepay_id,signType:"MD5",paySign:r.paySign,success:function(){wx.showToast({title:"支付成功",icon:"success"}),wx.redirectTo({url:"/pages/activity/order/info?id="+i})},fail:function(e){"requestPayment:fail cancel"===e.errMsg?wx.showToast({title:"支付已取消",icon:"none"}):wx.showToast({title:"支付失败",icon:"none"})}}),[2]}}))}))},t.prototype.getData=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,a;return n.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,o.selectSignById(e)];case 1:return t.data=n.sent(),a=this.data.endTime,a=a.replace(".000+0000",""),a=a.replace(/-/g,"/"),a=a.replace(/T/g," "),this.surplusTime=+new Date(a)+288e5-+new Date,[2]}}))}))},t.prototype.getDate=function(e){if(e){e=e.replace(".000+0000",""),e=e.replace(/-/g,"/"),e=e.replace(/T/g," ");var t=new Date(new Date(e).getTime()+288e5);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()}},t.prototype.audioPlay=function(e){var t=this,a=(e.currentTarget.dataset.id,e.currentTarget.dataset.key,this.audioArr),n=a.src;n&&(this.myaudio.src=n,this.myaudio.autoplay=!0,this.myaudio.startTime=0,this.$set(this.audioArr,"bl",!0),this.myaudio.onPlay((function(){t.audioArr=a})),this.myaudio.onEnded((function(){a.bl=!1,t.myaudio.stop(),t.myaudio.destroy(),t.myaudio=wx.createInnerAudioContext(),t.myaudio.obeyMuteSwitch=!1,t.$set(t.audioArr,"bl",!1)})))},t.prototype.getPrice=function(e){return(e/100+1e-6).toFixed(2)},t.prototype.audioStop=function(e){e.currentTarget.dataset.key;var t=this.audioArr;t.bl=!1,this.myaudio.stop(),this.myaudio.destroy(),this.myaudio=wx.createInnerAudioContext(),this.myaudio.obeyMuteSwitch=!1},t.prototype.phoneCall=function(){wx.makePhoneCall({phoneNumber:this.phone})},t=n.__decorate([r.default],t),t}(i.default);t.default=u},d0d7:function(e,t,a){"use strict";a.r(t);var n=a("a4c2"),i=a("3a24");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("9347");var o,s=a("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=u.exports},d1d0:function(e,t,a){"use strict";(function(e){a("6cdc"),a("921b");n(a("66fd"));var t=n(a("d0d7"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])}},[["d1d0","common/runtime","common/vendor"]]]);