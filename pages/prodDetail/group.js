(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/prodDetail/group","components/shareOrSave","components/swiper"],{"00c5":function(e,t,o){"use strict";var i=o("58ec"),s=o.n(i);s.a},"082a":function(e,t,o){"use strict";(function(e){o("6cdc"),o("921b");i(o("66fd"));var t=i(o("cf96"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"0baf":function(e,t,o){"use strict";var i,s=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return i}))},"35e1":function(e,t,o){"use strict";o.r(t);var i=o("af62"),s=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},5515:function(e,t,o){"use strict";var i,s=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return i}))},"58ec":function(e,t,o){},5998:function(e,t,o){"use strict";o.r(t);var i=o("5515"),s=o("9bc9");for(var n in s)"default"!==n&&function(e){o.d(t,e,(function(){return s[e]}))}(n);o("eca7");var r,a=o("f0c5"),c=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},"67ea":function(e,t,o){},6889:function(e,t,o){"use strict";var i,s=function(){var e=this,t=e.$createElement,o=(e._self._c,(e.proData.price/100).toFixed(2)),i=(e.proData.assemblePrice/100).toFixed(2),s=(e.proData.assemblePrice/100).toFixed(2);e._isMounted||(e.e0=function(t){e.showShareOrSave=!0},e.e1=function(t){e.isShowPopup=!0},e.e2=function(t){e.isShowPopup=!0},e.e3=function(t){e.showAllGroup=!0}),e.$mp.data=Object.assign({},{$root:{g0:o,g1:i,g2:s}})},n=[];o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return i}))},"91b0":function(e,t,o){"use strict";o.r(t);var i=o("0baf"),s=o("35e1");for(var n in s)"default"!==n&&function(e){o.d(t,e,(function(){return s[e]}))}(n);o("00c5");var r,a=o("f0c5"),c=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},"94fa":function(e,t,o){"use strict";o.r(t);var i=o("d210"),s=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"9bc9":function(e,t,o){"use strict";o.r(t);var i=o("ff32"),s=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},a0d9:function(e,t,o){},af62:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"selfswiper",props:{imgUrls:{type:Array,default:function(){return[]}},self_class:{type:String,default:""},isShowMask:{type:Boolean,default:!1},isShowDots:{type:Boolean,default:!0}},data:function(){return{indicator:!1,interval:5e3,duration:400,autoplay:!0,circular:!0,cur:0,imgs:[]}},mounted:function(){},onUnload:function(){this.cur=0},onHide:function(){this.cur=0},methods:{swiperChange:function(e){this.$emit("swiperChange",this.cur)},swipclick:function(e){this.$emit("swipclick",e)}}};t.default=i},af99:function(e,t,o){"use strict";var i=o("a0d9"),s=o.n(i);s.a},cf96:function(e,t,o){"use strict";o.r(t);var i=o("6889"),s=o("94fa");for(var n in s)"default"!==n&&function(e){o.d(t,e,(function(){return s[e]}))}(n);o("af99");var r,a=o("f0c5"),c=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},d210:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("9ab4"),s=i.__importDefault(o("66fd")),n=i.__importDefault(o("2fe1")),r=i.__importDefault(o("91b0")),a=i.__importDefault(o("5998")),c=o("7e00"),d=o("01ea");o("7e6c");var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showAllGroup=!1,t.isShowPopup=!1,t.showShareOrSave=!1,t.remark="",t.goodlabelRequestList=[],t.images=[],t.types=[],t.typeId=0,t.goodsPrice=0,t.goodId=0,t.goodsMsg={goodsDetails:"",name:"",price:0},t.assembleModelList=[],t.isGroup=!1,t.isCollect=!1,t.cardTel="",t.type_index_1=0,t.num=1,t.shareForwardId=0,t.isPreviewImg=!1,t.maskImg="",t.proData={},t.isJoin=!1,t.goodsNotice={applicableAge:"",courseDuration:"",typeDuration:"",courseCharacteristics:"",classEquipment:"",validity:"",startTime:"",classType:"",courseUpdate:"",electronicNotes:"",refundPolicy:""},t.assembleId=0,t.assembleEndTime=0,t}return i.__extends(t,e),t.prototype.onLoad=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(o){return wx.removeStorageSync("prod"),e=this.$root.$mp.query.goodId,this.cardTel=wx.getStorageSync("CARDTEL")||"",this.goodId=e||0,this.checkCollect(),this.getProdDetail(),c.addGoodsForwardRecord(this.goodId).then((function(e){t.shareForwardId=e})),[2]}))}))},t.prototype.showPayInfo=function(e,t){this.isGroup=e,this.isShowPopup=!0,this.showAllGroup=!1,t&&(this.assembleId=t)},t.prototype.showInfo=function(e){wx.showToast({title:e,icon:"none"})},t.prototype.closeShowAllGroup=function(){this.showAllGroup=!1},t.prototype.getData=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.prototype.setNum=function(e){this.num=e.detail},t.prototype.onClose=function(){this.isShowPopup=!1,this.assembleId=0},t.prototype.closeModal=function(){this.showShareOrSave=!1},t.prototype.closePreviewImg=function(){this.isPreviewImg=!1,wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",animation:{duration:1}})},t.prototype.saveImg=function(){var e=this;wx.saveImageToPhotosAlbum({filePath:this.maskImg,success:function(){wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",animation:{duration:1}}),e.isPreviewImg=!1,wx.showToast({title:"保存成功",duration:1e3,icon:"success",mask:!0})},fail:function(){wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",animation:{duration:1}}),e.isPreviewImg=!1,wx.showToast({title:"保存失败",duration:1e3,icon:"none",mask:!0})}})},t.prototype.save=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(o){switch(o.label){case 0:return this.showShareOrSave=!1,""!==this.maskImg?(wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#848485",animation:{duration:200}}),this.isPreviewImg=!0,[2]):(wx.showLoading(),[4,c.goodsCard(this.types[this.type_index_1].selectId)]);case 1:return e=o.sent(),wx.hideLoading(),wx.getImageInfo({src:d.URL+e,success:function(e){t.maskImg=e.path,wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#848485",animation:{duration:200}}),t.isPreviewImg=!0}}),[2]}}))}))},t.prototype.makePhone=function(){this.cardTel?wx.makePhoneCall({phoneNumber:this.cardTel}):wx.showToast({title:"还没有添加电话呢！",duration:2e3,icon:"none"})},t.prototype.checkCollect=function(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return[4,c.checkCollect({itemType:"1",itemId:this.goodId+""})];case 1:return e=t.sent(),this.isCollect=!!e,[2]}}))}))},t.prototype.getProdDetail=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(o){switch(o.label){case 0:return wx.showLoading({title:"Loading...",mask:!0}),[4,c.getGoodsInfo(this.goodId)];case 1:return e=o.sent(),wx.hideLoading(),this.goodsNotice=e.goodsNotice,this.remark=e.remark,this.assembleModelList=e.assembleModelList.filter((function(e){return e.assembleEndTime>0})),this.proData=e,this.assembleEndTime=e.assembleEndTime/1e3,setInterval((function(){t.assembleEndTime-=1}),1e3),this.goodsMsg={goodsDetails:e.goodsDetails||"",name:e.goodsName,price:e.price/100},this.goodsMsg.price=parseFloat(this.goodsMsg.price.toFixed(2)),e.goodPhoto&&(this.images=e.goodPhoto.split(",")),e.goodSpecModelList&&(e.goodSpecModelList.forEach((function(e,t){e.goodSpecModelList?(e.selectId=e.goodSpecModelList[0].specId,e.price=parseFloat((e.goodSpecModelList[0].assemblePrice/100).toFixed(2)),e.specNum=e.goodSpecModelList[0].specNum):(e.selectId=e.specId,e.price=e.price/100,e.price=parseFloat(e.price.toFixed(2)))})),this.types=e.goodSpecModelList,this.goodsPrice=this.types[0].price,this.typeId=this.types[0].selectId),[2]}}))}))},t.prototype.toProductList=function(){wx.switchTab({url:"/pages/Product/main"})},t.prototype.group=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,o,s,n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),wx.showLoading({title:"Loading...",mask:!0}),[4,c.openOrJoinAssemble(this.proData.goodsId,this.assembleId>0?this.assembleId:void 0)];case 1:return e=i.sent(),wx.hideLoading(),t=this.proData,o={sum:this.num,goodsId:t.goodsId,assembleId:e},s=this.types[this.type_index_1].selectId,n=JSON.parse(JSON.stringify(this.types[this.type_index_1].goodSpecModelList.find((function(e){return s===e.specId})))),n.goodsName=t.goodsName,n.num=o.sum,n.photoUrl=t.goodPhoto,n.cardId=wx.getStorageSync("CARDID"),n["assembleId"]=o.assembleId||"",n.specName=this.types[this.type_index_1].specName,n.price=(n.assemblePrice/100).toFixed(2),console.log(n.assemblePrice,n.num,n,"===========>"),n.allPrice=n.price*n.num,wx.setStorageSync("orderInfo",[{companyId:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyId,companyName:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName,orderState:1,allNum:1,orderPrice:n.price*n.num,shopcartModelList:[n]}]),wx.navigateTo({url:"../orderConfirm/main"}),[3,3];case 2:return r=i.sent(),wx.hideLoading(),this.showInfo(r),[3,3];case 3:return[2]}}))}))},t.prototype.buynow=function(){this.isGroup?this.group():this.goToBy()},t.prototype.goToBy=function(){var e=this.types[this.type_index_1].selectId,t=JSON.parse(JSON.stringify(this.types[this.type_index_1].goodSpecModelList.find((function(t){return e===t.specId}))));t.goodsName=this.goodsMsg.name,t.num=this.num,t.photoUrl=this.images[0],t.cardId=wx.getStorageSync("CARDID"),t.price=(t.price/100).toFixed(2),t.allPrice=t.price*t.num,wx.setStorageSync("orderInfo",[{oneRoyalty:this.proData.oneRoyalty,twoRoyalty:this.proData.twoRoyalty,companyId:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyId,companyName:JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName,orderState:1,allNum:1,orderPrice:t.price*t.num,shopcartModelList:[t]}]),wx.navigateTo({url:"../orderConfirm/main"})},t.prototype.collect=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return wx.showLoading(),this.isCollect?[4,c.delCollection(this.goodId)]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,c.addCollection(this.goodId)];case 3:e.sent(),e.label=4;case 4:return this.isCollect=!this.isCollect,wx.hideLoading(),[2]}}))}))},t.prototype.type_tap=function(e,t,o){wx.showLoading(),this.types[e].selectId=o;var i=parseFloat((this.types[e].goodSpecModelList[t].assemblePrice/100).toFixed(2)),s=this.types[e].goodSpecModelList[t].specNum;this.$set(this.types[e],"price",i),this.$set(this.types[e],"specNum",s),this.goodsPrice=i,this.num=1,wx.hideLoading()},t.prototype.type_tap_1=function(e,t){this.type_index_1=t,this.type_tap(this.type_index_1,0,this.types[this.type_index_1].goodSpecModelList[0].specId)},t.prototype.onShareAppMessage=function(){c.validGoodsForwardRecord(this.shareForwardId);var e=wx.getStorageSync("CARDID")+""+(new Date).getTime();c.addShareRecord(2,this.goodId+"",e);var t="/pages/prodDetail/main?goodId="+this.goodId+"&cardId="+wx.getStorageSync("CARDID")+"&tel="+this.cardTel+"&companyId="+wx.getStorageSync("COMPANYID")+"&forwardId="+this.shareForwardId+"&goType=1&shareId="+e;return{title:this.goodsMsg.name+" - "+JSON.parse(wx.getStorageSync("CURRENT_COMPANY")).companyName,path:t}},t=i.__decorate([n.default({components:{SelfSwiper:r.default,ShareOrSave:a.default}})],t),t}(s.default);t.default=u},eca7:function(e,t,o){"use strict";var i=o("67ea"),s=o.n(i);s.a},ff32:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o("ee73"),s={name:"shareOrSave",props:["status","saveId","typeId"],methods:{closeModal:function(){this.$emit("closeModal")},save:function(){var e=this.saveId||0,t=this.typeId||0;(0,i.addShareRecord)(wx.getStorageSync("COMPANYID"),t,e,wx.getStorageSync("CARDID")+""+(new Date).getTime()).then((function(e){}),(function(e){})),this.$emit("save")}}};t.default=s}},[["082a","common/runtime","common/vendor"]]]);