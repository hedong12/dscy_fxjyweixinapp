(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/searchChooseItem/main"],{"0710":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}))},"386b":function(t,e,n){},"51ae":function(t,e,n){"use strict";(function(t){n("6cdc"),n("921b");o(n("66fd"));var e=o(n("78c9"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"58e5":function(t,e,n){"use strict";n.r(e);var o=n("9265"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"78c9":function(t,e,n){"use strict";n.r(e);var o=n("0710"),i=n("58e5");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("d15d");var c,s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=r.exports},9265:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n("a34a")),i=s(n("fa99")),a=s(n("b775")),c=s(n("beb8"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,o,i,a,c){try{var s=t[a](c),r=s.value}catch(u){return void n(u)}s.done?e(r):Promise.resolve(r).then(o,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)}))}}function f(t){return d(t)||h(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var p={name:"",components:{},data:function(){return{choose:{title:"",addr:"",lat:"",lng:""},myAmapFun:"",Mc:"",lists:[],ph:"",activeitem:"当前定位",reset:"重新定位",type:"",key:"",searchList:[]}},onShow:function(){var t=this,e="";this.type=this.$root.$mp.query.type,this.key="","company"==this.type?(e="选择校园",this.ph="输入公司名称",this.activeitem="当前公司",this.reset="创建校园",this.init()):"city"==this.type&&(this.ph="输入城市名",this.Mc=wx.createMapContext("map"),this.myAmapFun=new i.default.AMapWX({key:"e11026819b6d300fda6a2c680fbd2fef"}),this.lists=c.default,this.searchList=[],c.default.map((function(e){var n;(n=t.searchList).push.apply(n,f(e.citys))})),this.getlocation()),wx.setNavigationBarTitle({title:e})},onPullDownRefresh:function(){var t=u(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"company"==this.type&&this.init(),setTimeout((function(){wx.stopPullDownRefresh()}),1500);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{key:function(t,e){"company"==this.type&&this.searchItem(t)}},computed:{searchCity:function(){var t,e=this;if(this.key){var n=this.searchList.filter((function(t){return t.region_name.includes(e.key)}));t=[{name:"",citys:n}]}else t=this.lists;return t}},methods:{toCreateCompany:function(){wx.navigateToMiniProgram({appId:"wx1c06c4e49bf6040e",path:"pages/editEnterprise/main?type=add&goType=1",extarData:{open:"auth"},success:function(t){},fail:function(t){console.log(t)}})},init:function(){var t=this,e=this;e.lists=[],a.default.POST({ignore:!0},"","/personal/getCompanyAllInfo").then((function(e){t.lists=e})).catch((function(t){}))},searchItem:function(){var t=this;a.default.POST({companyName:this.key},"","/personal/getCompanyAllInfo").then((function(e){t.lists=e})).catch((function(t){}))},getlocation:function(){wx.showLoading({title:"定位中...",mask:!0});var t=this;wx.getLocation({type:"wgs84",success:function(e){t.choose.lat=e.latitude,t.choose.lng=e.longitude,t.getLocal(),wx.hideLoading()},fail:function(t){wx.hideLoading()},complete:function(){wx.hideLoading()}})},getLocal:function(t,e){var n=this;n.myAmapFun.getRegeo({location:n.choose.lng+","+n.choose.lat,success:function(t){var e=t[0].regeocodeData.addressComponent,o=e.neighborhood,i=e.streetNumber;n.choose.title=e.city,n.adcode=e.adcode,o&&o.name.length>0?n.choose.addr=o.name:n.choose.addr=i.street+i.number},fail:function(t){n.choose.title="失败",n.choose.addr="重新定位",console.log(t)}})},choose_item:function(t,e,n){"city"==this.type?wx.setStorageSync("company_city",t):"company"==this.type&&(wx.setStorageSync("choose_company",t),wx.setStorageSync("choose_company_id",e),wx.setStorageSync("choose_company_logo",n)),this.$set(this.choose,"title",t),console.log(this.choose),wx.showLoading(),setTimeout((function(){wx.navigateBack(),wx.hideLoading()}),200)},cancle:function(){this.key=""}}};e.default=p},d15d:function(t,e,n){"use strict";var o=n("386b"),i=n.n(o);i.a}},[["51ae","common/runtime","common/vendor"]]]);